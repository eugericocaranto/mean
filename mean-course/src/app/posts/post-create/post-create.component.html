<mat-card>
  @if (isLoading) {
    <mat-spinner></mat-spinner>
  } @else {
    <form [formGroup]="form" (submit)="onSavePost()">
      <mat-form-field>
        <input type="text" matInput formControlName="title" placeholder="Post Title">
        @if (form.get('title').invalid) {
          <mat-error>Title is required</mat-error>
        }
      </mat-form-field>
      <div>
        <button mat-stroked-button type="button" (click)="filePicker.click()">Pick Image</button>
        <input type="file" #filePicker (change)="onImageChange($event)">
      </div>
      @if (imagePreview && imagePreview !== '' && form.get('image').valid) {
        <div class="image-preview">
          <img [src]="imagePreview" alt="form.value.title">
        </div>
      }

      <mat-form-field class="example-full-width">
        <textarea rows="6" matInput formControlName="content" placeholder="Post Content"></textarea>
        @if (form.get('content').invalid) {
          <mat-error>Content is required</mat-error>
        }
      </mat-form-field>
  
      <div class="example-button-row">
        <button mat-raised-button type="submit">Save Post</button>
      </div>
    </form>
  }
</mat-card>
